# 控制台指令

JustStation使用的是`SpringShell`框架作为控制台指令实现框架

* [SpringShell 介绍](https://spring.io/projects/spring-shell#overview)
* [SpringShell 开始](https://projects.spring.io/spring-shell/)

## 使用
推荐一篇入门介绍，来自nuccch [Spring Shell入门介绍](https://www.cnblogs.com/nuccch/p/11067342.html)

SpringShell同样是以注解的方式进行命令编写，主要会用到的注解有`ShellComponent`、`ShellMethod`和`ShellOption`。
`ShellComponent`用于类上，用于标记与指令的注入
`ShellMethod`用于方法上，标记指令的Key，默认的指令名为方法名，可通过注解的key方法手动填入指令名，允许多个。
`ShellOption`用于参数上，标记指令参数。在输入指令时，默认以参数名顺序填入，也可以自定参数名。

```java
@ShellComponent("登录指令")
public class LoginCommand {

    @Autowired
    private LoginService loginService;

    @ShellMethod("命令行用户登录")
    public String login(
            @ShellOption(help = "登录用户名") String username,
            @ShellOption(help = "用户密码") String password,
            @ShellOption(help = "登录标志", defaultValue = "local") String tag) {
        LoginInfo loginInfo = new LoginInfo();
        loginInfo.setUsername(username);
        loginInfo.setPassword(password);
        loginInfo.setTag(LoginTag.getTag(tag));
        BaseResult<?> result = loginService.login(loginInfo);
        PrintUtils.println(result.toString());
        return result.getMsg();
    }

}
```

这里的登录指令可以通过`help login`查看细节，`help`是Shell的默认指令。

```txt
shell:>help login

NAME
    login - 命令行用户登录

SYNOPSYS
    login [--username] string  [--password] string  [[--tag] string]  

OPTIONS
    --username  string
        登录用户名
        [Mandatory]

    --password  string
        用户密码
        [Mandatory]

    --tag  string
        登录标志
        [Optional, default = local]
```

要使用login指令，可以输入`login awsl 7777`或是指定登录标记`login awsl 7777 mobile`，也可以手动指定参数`login --username awsl --password 7777`或是`login --username awsl --password 7777 --tag mobile`
