# 接口日志

接口日志的实现接口是基于Spring提供的AOP方式注入的，当标记接口的使用时触发日志。
接口日志主要的实现类有`LogAspect`和`LogHandler`，开发者可以通过实现`LogHandler`来完成自己的日志逻辑。

## 实现`LogHandler`

`LogHandler`有两个方法，一个是接口调用前触发的`onLog`接口，另一个是标记接口调用后回调的`onReturn`接口。框架内置了一个实现类，开发者自定义只需要实现此接口，并使用`@Component`注入Bean池即可。

```java
public interface LogHandler {

    /**
     * 日志记录
     *
     * @param method 标记的接口
     * @param logIt  标记的注解
     */
    void onLog(Method method, LogIt logIt);

    /**
     * 接口完成时
     *
     * @param method 标记的接口
     * @param logIt  标记的注解
     * @param o 返回值
     */
    void onReturn(Method method, LogIt logIt, Object o);
}
```

## 使用

接口日志的使用会用到`@LogIt`注解，用此注解标记接口即可。例如：

```java
    @LogIt(type = LogType.LOGIN, message = "有人登录啦啦啦")
    @Operation(summary = "登录")
    @PostMapping
    public BaseResult<?> login(@RequestBody LoginInfo loginInfo) {
        return loginService.login(loginInfo);
    }
```

这里会默认使用内置的日志处理器，也可以在注解中选择。

## 配置文件

接口日志的配置属性如下：
```yaml
station:
  # API日志配置
  api-log:
    # 是否开启API日志功能
    enable: true
    # 当API日志功能开启后，允许的日志等级（与LogLevel枚举类对应），使用英文,隔开。为空则允许全部
    level: debug, info, warning, error
    # 当API日志功能开启后，允许的日志类型（与LogType枚举类对应），使用英文,隔开。为空则允许全部
    type: default, insert, update
```
